{%extends "layout.html"%}
{%block body%}
<h1>{{ name }} forum</h1>

{% if session.user_info %}
<p class="text-right">
  <a href="{{ url_for('create_thread') }}" class="btn btn-success" role="button">새 쓰레드 생성</a><br/>
</p>
{% endif %}

<div class="row col-xs-12 col-md-12">
  {% if start_page_idx == 0 %} 시작 {% endif %}

  {% if start_page_idx > 0 %}
    <a href="{{ url_for('forum', name='unity', page=start_page_idx) }}" class="btn btn-link" role="button"> < </a>
  {% endif %}

  {% for n in range(start_page_idx, end_page_idx) %}
    <a href="{{ url_for('forum', name='unity', page=n+1) }}" class="btn btn-link" role="button">{{ (n+1) }}</a>
  {% endfor %}

  {% if end_page_idx < total_pages %}
    <a href="{{ url_for('forum', name='unity', page=end_page_idx+1) }}" class="btn btn-link" role="button"> > </a>
  {% endif %}

  {% if end_page_idx == total_pages %} 끝 {% endif %}
</div>

<table class="table table-striped table-condensed">
  <tr>
      <th>
        <div class="row">
          <div class="col-xs-12 col-md-7">제목</div>
          <div class="col-xs-8 col-md-3">글쓴이</div>
          <div class="col-xs-4 col-md-2">답변</div>
        </div>  
      </th>
  </tr>
{% for (thread, first_message, author) in threads %}
  <tr>
    <td>
        <div class="row">
          <div class="col-xs-11 col-md-7"><a href="{{ url_for('show_thread', id=thread.id) }}">{{ thread.title }}</a></div>
          <div class="col-xs-8 col-md-3"> {{ author.nickname }}<br/> {{ first_message.date }} </div>
          <div class="col-xs-4 col-md-2"> 답변: {{ thread.replies }}</br> 조회: {{ thread.views }} </div>
        </div>
    </td>
  </tr>
{% else %}
  <tr>
    <td>믿을 수 없네요. 쓰레드가 하나도 없어요.</td>
  </tr>
{% endfor %}
</table>

<div class="row col-xs-12 col-md-12">
  {% if start_page_idx == 0 %} 시작 {% endif %}

  {% if start_page_idx > 0 %}
    <a href="{{ url_for('forum', name='unity', page=start_page_idx) }}" class="btn btn-link" role="button"> < </a>
  {% endif %}

  {% for n in range(start_page_idx, end_page_idx) %}
    <a href="{{ url_for('forum', name='unity', page=n+1) }}" class="btn btn-link" role="button">{{ (n+1) }}</a>
  {% endfor %}

  {% if end_page_idx < total_pages %}
    <a href="{{ url_for('forum', name='unity', page=end_page_idx+1) }}" class="btn btn-link" role="button"> > </a>
  {% endif %}

  {% if end_page_idx == total_pages %} 끝 {% endif %}
</div>

{% if session.user_info %}
<p class="text-right">
  <a href="{{ url_for('create_thread') }}" class="btn btn-success" role="button">새 쓰레드 생성</a><br/>
</p>
{% endif %}

{% endblock %}